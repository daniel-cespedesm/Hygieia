pipeline {
  agent { label "Hygieia-node" }
  stages {
    stage('Dockerize') {
      steps {
        sh 'export DOCKER_HOST=127.0.0.1'
        sh 'docker-compose up -d'
        sh 'sudo export DOCKER_HOST=127.0.0.1:2375'
      }
    }
  }
}


stage ('Initialize') {
  steps {
    sh '''
      echo "PATH = ${PATH}"
      echo "M2_HOME = ${M2_HOME}"
    '''
  }
}
stage('Build') {
  steps {
    sh 'mvn clean install'
  }
  post {
    failure {
      sh 'mvn clean install -rf :UI'
    }
  }
}
